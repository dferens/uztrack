{% extends 'track/base.html' %}

{% load staticfiles %}

{% block styles %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'fullcalendar/fullcalendar.css' %}">
  <link rel="stylesheet" href="{% static 'css/trackedway_detail.css' %}">
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'js/jquery-ui.js' %}"></script>
  <script src="{% static 'js/angular.js' %}"></script>
  <script src="{% static 'fullcalendar/fullcalendar.js' %}"></script>
  <script src="{% static 'ui-calendar/calendar.js' %}"></script>
  <script src="{% static 'js/trackedway_detail.js' %}"></script>
{% endblock %}

{% block content %}
  {% with way=tracked_way.way %}
  <div class="row" ng-app="myApp">
    <div class="col-md-10 col-md-offset-1">
      <div ng-controller="WayDetailCtrl">
        <div class="panel panel-default">
          <p class="panel-heading">Tracked way details</p>
          <div class="panel-body">
            <p class="lead">Way: {{ way }}</p>
            <p class="lead">Days: {{ tracked_way.selected_weekdays|join:',' }}</p>
          </div>
        </div>
        {% verbatim %}
        <div class="panel panel-default calendar-container">
          <div ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar="calendar"></div>
        </div>
        <div class="panel-group histories">
        {% endverbatim %}
        {% for tickets_history in tracked_way.histories.all %}
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" data-parent=".histories" href=".history{{ forloop.counter }}">
                  Search on (some data)
                </a>
              </h4>
            </div>
            <div id="history{{ forloop.counter }}" class="panel-collapse collapse">
              <div class="panel-body">
                Search data
              </div>
            </div>
          </div>
        {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% endwith %}
{% endblock %}
